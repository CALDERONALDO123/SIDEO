{% extends "cba_app/base.html" %}

{% block content %}
    <div class="table-wrapper" style="max-width: 520px; margin: 0 auto;">
        <h2 style="margin-top:0;">Nueva contraseña</h2>

        {% if token_fail %}
            <div class="notice notice--error">El enlace no es válido o ya fue usado.</div>
            <div style="margin-top: 14px;">
                <a href="{% url 'account_reset_password' %}" class="button">Solicitar otro enlace</a>
            </div>
        {% else %}
            {% if form.errors %}
                <div class="notice notice--error">Revisa los campos e inténtalo de nuevo.</div>
            {% endif %}

            <form method="post" style="margin-top: 14px;">
                {% csrf_token %}

                <div style="display:grid; gap: 10px;">
                    <div>
                        <label for="id_password1" class="text-muted">Contraseña</label>
                        <input id="id_password1" name="password1" type="password" class="cba-input" autocomplete="new-password" required>
                        {% if form.password1.errors %}<div class="text-muted" style="color:#b91c1c; font-size: 12px;">{{ form.password1.errors|striptags }}</div>{% endif %}
                    </div>
                    <div>
                        <label for="id_password2" class="text-muted">Confirmar contraseña</label>
                        <input id="id_password2" name="password2" type="password" class="cba-input" autocomplete="new-password" required>
                        {% if form.password2.errors %}<div class="text-muted" style="color:#b91c1c; font-size: 12px;">{{ form.password2.errors|striptags }}</div>{% endif %}
                    </div>
                </div>

                <div style="display:flex; gap: 10px; align-items:center; margin-top: 14px;">
                    <button type="submit" class="button">Guardar contraseña</button>
                </div>
            </form>
        {% endif %}
    </div>
{% endblock %}
