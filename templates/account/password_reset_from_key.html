{% extends "cba_app/base.html" %}

{% block body_class %}layout--auth page-auth{% endblock %}

{% block content %}
    <div class="auth-card">
        <h2 class="auth-title">Nueva contraseña</h2>

        {% if token_fail %}
            <div class="notice notice--error">El enlace no es válido o ya fue usado.</div>
            <div class="auth-actions">
                <a href="{% url 'account_reset_password' %}" class="button">Solicitar otro enlace</a>
            </div>
        {% else %}
            {% if form.errors %}
                <div class="notice notice--error">Revisa los campos e inténtalo de nuevo.</div>
            {% endif %}

            <form method="post" class="auth-form">
                {% csrf_token %}

                <div class="auth-fields">
                    <div>
                        <label for="id_password1" class="auth-label">Contraseña</label>
                        <input id="id_password1" name="password1" type="password" class="cba-input" autocomplete="new-password" required>
                        {% if form.password1.errors %}<div class="auth-error">{{ form.password1.errors|striptags }}</div>{% endif %}
                    </div>
                    <div>
                        <label for="id_password2" class="auth-label">Confirmar contraseña</label>
                        <input id="id_password2" name="password2" type="password" class="cba-input" autocomplete="new-password" required>
                        {% if form.password2.errors %}<div class="auth-error">{{ form.password2.errors|striptags }}</div>{% endif %}
                    </div>
                </div>

                <div class="auth-actions">
                    <button type="submit" class="button">Guardar contraseña</button>
                </div>
            </form>
        {% endif %}
    </div>
{% endblock %}
